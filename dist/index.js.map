{"version":3,"sources":["../src/index.ts","../src/apis/route.ts","../src/utils/constant.ts","../src/utils/string.ts","../src/types/SearchOrdering.ts","../src/apis/getMainPage.ts","../src/utils/cheerio.ts","../src/apis/login.ts","../src/apis/logout.ts","../src/core/request.ts","../src/utils/error.ts","../src/core/engine.ts","../src/apis/webmaster/categories.ts","../src/apis/webmaster/deleted.ts","../src/utils/url.ts","../src/apis/webmaster/embed.ts","../src/apis/webmaster/utils/videoTransform.ts","../src/apis/webmaster/search.ts","../src/apis/webmaster/stars.ts","../src/apis/webmaster/stars_detailed.ts","../src/apis/webmaster/tags.ts","../src/apis/webmaster/video_by_id.ts","../src/apis/webmaster/video_is_active.ts","../src/core/webmaster.ts","../src/scrapers/pages/album.ts","../src/scrapers/pages/photo.ts","../src/utils/number.ts","../src/utils/time.ts","../src/scrapers/pages/video.ts","../src/scrapers/search/base.ts","../src/scrapers/search/album.ts","../src/scrapers/search/pornstar.ts","../src/scrapers/search/gif.ts","../src/utils/utils.ts","../src/scrapers/search/video.ts","../src/apis/getToken.ts","../src/apis/autoComplete.ts","../src/scrapers/search/model.ts","../src/scrapers/pages/model.ts","../src/scrapers/pages/pornstar.ts"],"sourcesContent":["import type { RequestInit } from 'node-fetch'\r\nimport type { AlbumSearchOptions, AutoCompleteOptions, GifSearchOptions, PornstarSearchOptions, VideoSearchOptions } from './types'\r\nimport { Route, getMainPage, login, logout } from './apis'\r\nimport { Engine } from './core/engine'\r\nimport { WebMaster } from './core/webmaster'\r\nimport { albumPage } from './scrapers/pages/album'\r\nimport { photoPage } from './scrapers/pages/photo'\r\nimport { videoPage } from './scrapers/pages/video'\r\nimport { albumSearch } from './scrapers/search/album'\r\nimport { pornstarSearch } from './scrapers/search/pornstar'\r\nimport { gifSearch } from './scrapers/search/gif'\r\nimport { videoSearch } from './scrapers/search/video'\r\nimport { modelSearch } from './scrapers/search/model'\r\nimport { getAutoComplete } from './apis/autoComplete'\r\nimport { getToken } from './apis/getToken'\r\nimport { modelPage } from './scrapers/pages/model'\r\nimport { pornstarPage } from './scrapers/pages/pornstar'\r\n\r\nexport * from './types'\r\nexport * from './utils/error'\r\nexport type { AlbumPage } from './scrapers/pages/album'\r\nexport type { PhotoPage } from './scrapers/pages/photo'\r\nexport type { VideoPage } from './scrapers/pages/video'\r\nexport type { PornstarPage } from './scrapers/pages/pornstar'\r\nexport type { ModelPage } from './scrapers/pages/model'\r\n\r\nexport type { AlbumSearchResult } from './scrapers/search/album'\r\nexport type { PornstarSearchResult } from './scrapers/search/pornstar'\r\nexport type { GifSearchResult } from './scrapers/search/gif'\r\nexport type { VideoSearchResult } from './scrapers/search/video'\r\n\r\nexport type { WebmasterCategory } from './apis/webmaster/categories'\r\nexport type { WebmasterDeleted } from './apis/webmaster/deleted'\r\nexport type { WebmasterEmbed } from './apis/webmaster/embed'\r\nexport type { WebmasterSearch } from './apis/webmaster/search'\r\nexport type { WebmasterStarsDetailed } from './apis/webmaster/stars_detailed'\r\nexport type { WebmasterStars, WebmasterStar } from './apis/webmaster/stars'\r\nexport type { WebmasterTags } from './apis/webmaster/tags'\r\nexport type { WebmasterVideoById } from './apis/webmaster/video_by_id'\r\nexport type { WebmasterVideoIsActive } from './apis/webmaster/video_is_active'\r\n\r\nexport class PornHub {\r\n    engine = new Engine()\r\n    route = Route\r\n    webMaster = new WebMaster(this.engine)\r\n\r\n    setAgent(agent: RequestInit['agent']) {\r\n        this.engine.request.setAgent(agent)\r\n    }\r\n\r\n    setHeader(key: string, value: string) {\r\n        this.engine.request.setHeader(key, value)\r\n    }\r\n\r\n    setCookie(key: string, value: any) {\r\n        this.engine.request.setCookie(key, value)\r\n    }\r\n\r\n    /**\r\n     * See: https://github.com/pionxzh/Pornhub.js/issues/27\r\n     * @deprecated This method is no longer needed.\r\n     */\r\n    async warmup() {\r\n        console.warn('`warmup` has been deprecated. You can safely remove this method call. It has been handled internally.')\r\n        // no-op\r\n    }\r\n\r\n    /**\r\n     * Login with account and password.\r\n    */\r\n    login(account: string, password: string) {\r\n        return login(this.engine, account, password)\r\n    }\r\n\r\n    /**\r\n     * Logout from Pornhub.com.\r\n    */\r\n    logout() {\r\n        return logout(this.engine)\r\n    }\r\n\r\n    /**\r\n     * Get token from Pornhub.com.\r\n     * Most of pornhub's api need this token.\r\n     * You can cache this token to avoid frequent requests (I'm not sure about the expiration time!).\r\n     *\r\n     * For now, this token is only used for `autoComplete` and `searchModel`.\r\n     * This library will automatically get token if you don't provide it.\r\n     */\r\n    getToken() {\r\n        return getToken(this.engine)\r\n    }\r\n\r\n    /**\r\n     * Get video information by url/ID\r\n     * @param urlOrId Video ID or page url\r\n    */\r\n    async video(urlOrId: string) {\r\n        if (!this.engine.warmedUp) {\r\n            // make a call to the main page to get the cookies.\r\n            // PornHub will redirect you to a corn video if you don't have a proper cookie set.\r\n            // See issue: [#27 Video been redirected to a corn video](https://github.com/pionxzh/Pornhub.js/issues/27)\\\r\n            await getMainPage(this.engine)\r\n            this.engine.warmedUp = true\r\n        }\r\n        return videoPage(this.engine, urlOrId)\r\n    }\r\n\r\n    /**\r\n     * Get album information by url/ID\r\n     * @param urlOrId Album ID or page url\r\n    */\r\n    album(urlOrId: string) {\r\n        return albumPage(this.engine, urlOrId)\r\n    }\r\n\r\n    /**\r\n     * Get photo information by url/ID\r\n     * @param urlOrId Photo ID or page url\r\n    */\r\n    photo(urlOrId: string) {\r\n        return photoPage(this.engine, urlOrId)\r\n    }\r\n\r\n    /**\r\n     * Get pornstar information by url/ID\r\n     * @param urlOrName Pornstar name or page url\r\n    */\r\n    pornstar(urlOrName: string) {\r\n        return pornstarPage(this.engine, urlOrName)\r\n    }\r\n\r\n    /**\r\n     * Get model information by url/ID\r\n     * @param urlOrName Model name or page url\r\n     */\r\n    model(urlOrName: string) {\r\n        return modelPage(this.engine, urlOrName)\r\n    }\r\n\r\n    /**\r\n     * Get autocomplete result by keyword.\r\n     */\r\n    autoComplete(keyword: string, options: AutoCompleteOptions = {}) {\r\n        return getAutoComplete(this.engine, keyword, options)\r\n    }\r\n\r\n    /**\r\n     * Search album by keyword.\r\n     */\r\n    searchAlbum(keyword: string, options: AlbumSearchOptions = {}) {\r\n        return albumSearch(this.engine, keyword, options)\r\n    }\r\n\r\n    /**\r\n     * Search gif by keyword.\r\n     */\r\n    searchGif(keyword: string, options: GifSearchOptions = {}) {\r\n        return gifSearch(this.engine, keyword, options)\r\n    }\r\n\r\n    /**\r\n     * Search pornstar by keyword.\r\n     */\r\n    searchPornstar(keyword: string, options: PornstarSearchOptions = {}) {\r\n        return pornstarSearch(this.engine, keyword, options)\r\n    }\r\n\r\n    /**\r\n     * Search model by keyword.\r\n     */\r\n    searchModel(keyword: string, options: AutoCompleteOptions = {}) {\r\n        return modelSearch(this.engine, keyword, options)\r\n    }\r\n\r\n    /**\r\n     * Search video by keyword.\r\n     */\r\n    searchVideo(keyword: string, options: VideoSearchOptions = {}) {\r\n        return videoSearch(this.engine, keyword, options)\r\n    }\r\n}\r\n","import urlcatM from 'urlcat'\r\nimport { BASE_URL } from '../utils/constant'\r\nimport { dashify, searchify } from '../utils/string'\r\nimport type { AlbumSearchOptions, AutoCompleteOptions, GifSearchOptions, PornstarSearchOptions, VideoSearchOptions, WebmasterSearchOptions } from '../types'\r\nimport { AlbumOrderingMapping, GifOrderingMapping, PornstarOrderingMapping, VideoOrderingMapping } from '../types'\r\n\r\nconst urlcat = (urlcatM as unknown as { default: typeof urlcatM }).default ?? urlcatM\r\n\r\nexport const Route = {\r\n    mainPage() {\r\n        return BASE_URL\r\n    },\r\n    /**\r\n     * @url https://www.pornhub.com/front/authenticate\r\n     */\r\n    authenticate() {\r\n        return urlcat(BASE_URL, '/front/authenticate')\r\n    },\r\n    /**\r\n     * @url https://www.pornhub.com/user/logout\r\n     */\r\n    logout(token: string) {\r\n        return urlcat(BASE_URL, '/user/logout', { token })\r\n    },\r\n    /**\r\n     * @url https://www.pornhub.com/video/search_autocomplete?q=random&orientation=straight&pornstars=1&alt=0&token=xxx\r\n     */\r\n    autocomplete(keyword: string, {\r\n        token,\r\n        sexualOrientation = 'straight',\r\n    }: AutoCompleteOptions) {\r\n        return urlcat(BASE_URL, '/video/search_autocomplete', {\r\n            q: keyword,\r\n            orientation: sexualOrientation,\r\n            pornstars: true,\r\n            token,\r\n            alt: 0,\r\n        })\r\n    },\r\n\r\n    albumPage(id: string) {\r\n        return urlcat(BASE_URL, '/album/:id', { id })\r\n    },\r\n    photoPage(id: string) {\r\n        return urlcat(BASE_URL, '/photo/:id', { id })\r\n    },\r\n    videoPage(id: string) {\r\n        return urlcat(BASE_URL, '/view_video.php', { viewkey: id })\r\n    },\r\n    pornstarPage(name: string) {\r\n        return urlcat(BASE_URL, '/pornstar/:name', { name })\r\n    },\r\n    modelPage(name: string) {\r\n        return urlcat(BASE_URL, '/model/:name', { name })\r\n    },\r\n    channelPage(name: string) {\r\n        return urlcat(BASE_URL, '/channels/:name', { name })\r\n    },\r\n\r\n    /**\r\n     * @url https://www.pornhub.com/albums/female-straight-uncategorized?search=random\r\n     */\r\n    albumSearch(keyword: string, {\r\n        page = 1,\r\n        segments = 'female-straight-uncategorized',\r\n        order = 'Most Relevant',\r\n        verified = false,\r\n    }: AlbumSearchOptions) {\r\n        const o = AlbumOrderingMapping[order]\r\n        return urlcat(BASE_URL, '/albums/:segment', {\r\n            segment: dashify(segments),\r\n            search: searchify(keyword),\r\n            page,\r\n            ...(o && { o }),\r\n            ...(verified && { verified: '1' }),\r\n        })\r\n    },\r\n    /**\r\n     * @url https://www.pornhub.com/gifs/search?search=xxx\r\n     */\r\n    gifSearch(keyword: string, {\r\n        page = 1,\r\n        order = 'Most Relevant',\r\n        sexualOrientation = 'straight',\r\n    }: GifSearchOptions) {\r\n        const o = GifOrderingMapping[order]\r\n        const pathTemplate = sexualOrientation === 'straight'\r\n            ? '/gifs/search'\r\n            : '/:sexualOrientation/gifs/search'\r\n        return urlcat(BASE_URL, pathTemplate, {\r\n            ...(sexualOrientation !== 'straight' && { sexualOrientation }),\r\n            search: searchify(keyword),\r\n            ...(page !== 1 && { page }),\r\n            ...(o && { o }),\r\n        })\r\n    },\r\n    /**\r\n     * @url https://www.pornhub.com/pornstars/search?search=hot\r\n     */\r\n    pornstarSearch(keyword: string, {\r\n        page = 1,\r\n        order = 'Most Relevant',\r\n    }: PornstarSearchOptions) {\r\n        const o = PornstarOrderingMapping[order]\r\n        return urlcat(BASE_URL, '/pornstars/search', {\r\n            search: searchify(keyword),\r\n            ...(page !== 1 && { page }),\r\n            ...(o && { o }),\r\n        })\r\n    },\r\n    /**\r\n     * @url https://www.pornhub.com/video/search?search=random\r\n     */\r\n    videoSearch(keyword: string, {\r\n        page = 1,\r\n        order = 'Most Relevant',\r\n        hd = false,\r\n        production = 'all',\r\n        durationMin,\r\n        durationMax,\r\n        filterCategory,\r\n    }: VideoSearchOptions) {\r\n        const o = VideoOrderingMapping[order]\r\n        return urlcat(BASE_URL, '/video/search', {\r\n            search: searchify(keyword),\r\n            ...(page !== 1 && { page }),\r\n            ...(o && { o }),\r\n            ...(hd && { hd: '1' }),\r\n            ...(production !== 'all' && { p: production }),\r\n            ...(durationMin && { min_duration: durationMin }),\r\n            ...(durationMax && { max_duration: durationMax }),\r\n            ...(filterCategory && { filter_category: filterCategory }),\r\n        })\r\n    },\r\n}\r\n\r\nconst WebmasterBaseUrl = urlcat(BASE_URL, '/webmasters')\r\n\r\nexport const WebmasterRoute = {\r\n    isVideoActive(id: string) {\r\n        return urlcat(WebmasterBaseUrl, '/is_video_active', { id })\r\n    },\r\n    categories() {\r\n        return urlcat(WebmasterBaseUrl, '/categories')\r\n    },\r\n    deletedVideos(page: number) {\r\n        return urlcat(WebmasterBaseUrl, '/deleted_videos', { page })\r\n    },\r\n    video_embed_code(id: string) {\r\n        return urlcat(WebmasterBaseUrl, '/video_embed_code', { id })\r\n    },\r\n    stars_detailed() {\r\n        return urlcat(WebmasterBaseUrl, '/stars_detailed')\r\n    },\r\n    stars() {\r\n        return urlcat(WebmasterBaseUrl, '/stars')\r\n    },\r\n    tags(letter: string) {\r\n        return urlcat(WebmasterBaseUrl, '/tags', { list: letter })\r\n    },\r\n    video_by_id(id: string, thumbsize: string) {\r\n        return urlcat(WebmasterBaseUrl, '/video_by_id', { id, thumbsize })\r\n    },\r\n    search(keyword: string, options: WebmasterSearchOptions = {}) {\r\n        const query = {\r\n            'search': keyword.split(' ').join('+'),\r\n            'page': options.page,\r\n            'period': options.period,\r\n            'ordering': options.ordering,\r\n            'thumbsize': options.thumbsize,\r\n            'tags[]': options.tags?.join(','),\r\n            'stars[]': options.stars?.join(','),\r\n            'category': options.category?.join(','),\r\n        }\r\n        return urlcat(WebmasterBaseUrl, '/search', query)\r\n    },\r\n}\r\n","export const BASE_URL = 'https://www.pornhub.com'\r\n","/**\r\n * \"luna test 1\" => \"luna+test+1\"\r\n * \"  luna    +test+1 \" => \"luna+test+1\"\r\n */\r\nexport function searchify(keyword: string) {\r\n    return keyword\r\n        .replace(/[^a-zA-Z0-9\\s]/g, ' ')\r\n        .trim()\r\n        .split(/\\s+/)\r\n        .join('+')\r\n}\r\n\r\n/**\r\n * ['uncategorized', 'transgender', 'straight', 'misc', 'male', 'gay', 'female']\r\n * => 'female-gay-male-misc-straight-transgender-uncategorized'\r\n */\r\nexport function dashify(keywords: string | string[]) {\r\n    if (!Array.isArray(keywords)) return keywords.trim()\r\n\r\n    return keywords\r\n        .map(keyword => keyword.trim())\r\n        .filter(keyword => keyword.length > 0)\r\n        .sort((a, b) => a.localeCompare(b))\r\n        .join('-')\r\n}\r\n\r\n/**\r\n * \"Eva Elfie\" => \"eva-elfie\"\r\n * \"Luna Okko\" => \"luna-okko\"\r\n */\r\nexport function slugify(keyword: string) {\r\n    return keyword\r\n        .replace(/[^a-zA-Z0-9\\s]/g, ' ')\r\n        .trim()\r\n        .split(/\\s+/)\r\n        .join('-')\r\n}\r\n","export type WebmasterSearchOrdering = 'newest' | 'mostviewed' | 'rating'\r\n\r\nexport type VideoSearchOrdering = 'Most Relevant' | 'Most Recent' | 'Most Viewed' | 'Top Rated' | 'Longest'\r\n\r\nexport type GifSearchOrdering = 'Most Relevant' | 'Most Recent' | 'Most Viewed' | 'Top Rated'\r\n\r\nexport type AlbumSearchOrdering = 'Most Relevant' | 'Most Recent' | 'Most Viewed' | 'Top Rated'\r\n\r\nexport type PornstarSearchOrdering = 'Most Relevant' | 'Most Popular' | 'Most Viewed' | 'No. of Video'\r\n\r\nexport const VideoOrderingMapping: Record<VideoSearchOrdering, string> = {\r\n    'Most Relevant': '',\r\n    'Most Recent': 'mr',\r\n    'Most Viewed': 'mv',\r\n    'Top Rated': 'tr',\r\n    'Longest': 'lg',\r\n}\r\n\r\nexport const GifOrderingMapping: Record<GifSearchOrdering, string> = {\r\n    'Most Relevant': '',\r\n    'Most Recent': 'mr',\r\n    'Most Viewed': 'mv',\r\n    'Top Rated': 'tr',\r\n}\r\n\r\nexport const AlbumOrderingMapping: Record<AlbumSearchOrdering, string> = {\r\n    'Most Relevant': '',\r\n    'Most Recent': 'mr',\r\n    'Most Viewed': 'mv',\r\n    'Top Rated': 'tr',\r\n}\r\n\r\nexport const PornstarOrderingMapping: Record<PornstarSearchOrdering, string> = {\r\n    'Most Relevant': '',\r\n    'Most Popular': 'mp',\r\n    'Most Viewed': 'mv',\r\n    'No. of Video': 'nv',\r\n}\r\n","import type { Engine } from '../core/engine'\r\nimport { Route } from './route'\r\n\r\nexport async function getMainPage(engine: Engine) {\r\n    const html = await engine.request.raw(Route.mainPage())\r\n    return html\r\n}\r\n","import * as cheerio from 'cheerio'\r\nimport type { Cheerio, Element } from 'cheerio'\r\n\r\nexport function getCheerio(html: string) {\r\n    return cheerio.load(html)\r\n}\r\n\r\nexport function getAttribute<T, R = T>(el: Cheerio<Element>, name: string, defaultValue: R): T | R\r\nexport function getAttribute<T>(el: Cheerio<Element>, name: string): T | null | undefined\r\nexport function getAttribute<T, R>(el: Cheerio<Element>, name: string, defaultValue?: R): T | R | null | undefined {\r\n    return <T>el.attr(name) ?? defaultValue\r\n}\r\n\r\nexport function getDataAttribute<T, R = T>(el: Cheerio<Element>, name: string, defaultValue: R): T | R\r\nexport function getDataAttribute<T>(el: Cheerio<Element>, name: string): T | null | undefined\r\nexport function getDataAttribute<T, R>(el: Cheerio<Element>, name: string, defaultValue?: R): T | R | null | undefined {\r\n    return <T>el.data(name) ?? defaultValue\r\n}\r\n","import type { Engine } from '../core/engine'\r\nimport { getCheerio } from '../utils/cheerio'\r\nimport { getMainPage } from './getMainPage'\r\nimport { Route } from './route'\r\n\r\ninterface LoginResult {\r\n    success: boolean\r\n    message: string\r\n    premium_redirect_cookie: string\r\n}\r\n\r\nexport async function login(engine: Engine, account: string, password: string) {\r\n    if (!account || typeof account !== 'string') throw new Error('Invalid Account')\r\n    if (!password || typeof password !== 'string') throw new Error('Invalid Password')\r\n\r\n    const { token, redirect } = await getToken(engine)\r\n    const result = await sendLoginForm(engine, account, password, token, redirect)\r\n\r\n    if (result.success) {\r\n        return {\r\n            success: true,\r\n            message: 'Successfully logged in.',\r\n            premium: result.premium_redirect_cookie === '1',\r\n        }\r\n    }\r\n    else {\r\n        return {\r\n            success: false,\r\n            message: `Login fail, Reason: ${result.message}`,\r\n            premium: false,\r\n        }\r\n    }\r\n}\r\n\r\nasync function getToken(engine: Engine) {\r\n    try {\r\n        const html = await getMainPage(engine)\r\n        const $ = getCheerio(html)\r\n        const token = $('[name=\"token\"]').attr('value') || ''\r\n        const redirect = $('[name=\"redirect\"]').attr('value') || ''\r\n        return { token, redirect }\r\n    }\r\n    catch (err) {\r\n        return await Promise.reject(err)\r\n    }\r\n}\r\n\r\nfunction sendLoginForm(engine: Engine, account: string, password: string, token: string, redirect: string) {\r\n    const data = {\r\n        redirect,\r\n        token,\r\n        remember_me: 1,\r\n        from: 'pc_login_modal_:show',\r\n        username: account,\r\n        password,\r\n        setSendTip: false,\r\n    }\r\n\r\n    return engine.request.postForm<LoginResult>(Route.authenticate(), data)\r\n}\r\n","import type { Engine } from '../core/engine'\r\nimport { getMainPage } from './getMainPage'\r\nimport { Route } from './route'\r\n\r\nexport async function logout(engine: Engine) {\r\n    try {\r\n        const mainPage = await getMainPage(engine)\r\n        const result = /href=\"\\/user\\/logout\\?token=([a-zA-Z0-9-_.]*?)\"/.exec(mainPage)\r\n        if (!result) throw new Error('Logout failed')\r\n\r\n        const token = result[1]\r\n        await engine.request.get(Route.logout(token))\r\n\r\n        return {\r\n            success: true,\r\n            message: 'Successfully logged out',\r\n        }\r\n    }\r\n    catch (err) {\r\n        return Promise.reject(err)\r\n    }\r\n}\r\n","import { URLSearchParams } from 'url'\r\nimport type { RequestInit, Response } from 'node-fetch'\r\nimport fetch from 'node-fetch'\r\nimport createDebug from 'debug'\r\nimport { HttpStatusError, IllegalError } from '../utils/error'\r\nimport { getCheerio } from '../utils/cheerio'\r\n\r\nconst debug = createDebug('request')\r\n\r\nexport class Request {\r\n    _agent: RequestInit['agent']\r\n    _headers: Record<string, string> = {}\r\n    _cookie: Map<any, any> = new Map()\r\n\r\n    setAgent(agent: RequestInit['agent']) {\r\n        this._agent = agent\r\n    }\r\n\r\n    setHeader(key: string, value: string) {\r\n        this._headers[key] = value\r\n    }\r\n\r\n    get cookie() {\r\n        return Array.from(this._cookie).map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`).join('; ')\r\n    }\r\n\r\n    setCookie(key: string, value: any) {\r\n        this._cookie.set(key, value)\r\n    }\r\n\r\n    async checkStatus(res: Response) {\r\n        if (res.ok) return res\r\n\r\n        if (res.status === 404) {\r\n            let html = ''\r\n            try {\r\n                html = await res.text()\r\n            }\r\n            catch (error) {\r\n                // ignore\r\n            }\r\n\r\n            if (/class=\"deterrenceWarn\"/.test(html)) {\r\n                const $ = getCheerio(html)\r\n                const warning = $('.deterrenceWarn').text()\r\n                if (warning) {\r\n                    return Promise.reject(new IllegalError(warning))\r\n                }\r\n            }\r\n        }\r\n        return Promise.reject(new HttpStatusError(`${res.status} ${res.statusText}`))\r\n    }\r\n\r\n    parseCookieItem(str: string) {\r\n        if (str.includes(';')) str = str.split(';')[0]\r\n\r\n        return str.split('=')\r\n    }\r\n\r\n    handleSetCookie(res: Response) {\r\n        if (!res.headers.raw()['set-cookie']) return res\r\n\r\n        res.headers.raw()['set-cookie'].forEach((item) => {\r\n            const [key, value] = this.parseCookieItem(item)\r\n            this._cookie.set(key, value)\r\n        })\r\n\r\n        this.setHeader('Cookie', this.cookie)\r\n        return res\r\n    }\r\n\r\n    toJson(res: Response) {\r\n        const contentType = res.headers.get('content-type') || ''\r\n        return contentType.includes('json') ? res.json() : res.text()\r\n    }\r\n\r\n    buildParams<U extends Record<string, any>>(data: U) {\r\n        const params = new URLSearchParams()\r\n        Object.keys(data).forEach((key) => {\r\n            params.append(key, data[key])\r\n        })\r\n        return params\r\n    }\r\n\r\n    buildRequest<U extends Record<string, any>, T>(method: 'get' | 'post' | 'post-form', url: string, data?: U): Promise<T> {\r\n        const opts: RequestInit = {}\r\n        const headers = Object.assign({}, this._headers)\r\n\r\n        if (method === 'get') opts.method = 'get'\r\n\r\n        if (method === 'post') {\r\n            headers['Content-Type'] = 'application/json'\r\n            opts.method = 'post'\r\n            opts.body = JSON.stringify(data)\r\n        }\r\n\r\n        if (method === 'post-form') {\r\n            // headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'\r\n            opts.method = 'post'\r\n            if (data) opts.body = this.buildParams<U>(data)\r\n        }\r\n\r\n        headers && (opts.headers = headers)\r\n        this._agent && (opts.agent = this._agent)\r\n\r\n        return fetch(url, opts)\r\n            .then(res => this.checkStatus(res))\r\n            .then(res => this.handleSetCookie(res))\r\n            .then(res => this.toJson(res) as T)\r\n            .catch(err => Promise.reject(err))\r\n    }\r\n\r\n    get<T>(url: string): Promise<T> {\r\n        debug(`GET ${url}`)\r\n        return this.buildRequest('get', url)\r\n    }\r\n\r\n    post<T, U extends object = any>(url: string, data: U): Promise<T> {\r\n        debug(`POST ${url}`)\r\n        return this.buildRequest('post', url, data)\r\n    }\r\n\r\n    postForm<T, U extends object = any>(url: string, data: U): Promise<T> {\r\n        debug(`POST ${url}`)\r\n        return this.buildRequest('post-form', url, data)\r\n    }\r\n\r\n    raw(url: string): Promise<string> {\r\n        debug(`GET ${url}`)\r\n        return this.buildRequest('get', url)\r\n    }\r\n}\r\n","export class HttpStatusError extends Error {}\r\n\r\nexport class IllegalError extends Error {}\r\n","import { BASE_URL } from '../utils/constant'\r\nimport { Request } from './request'\r\n\r\nexport class Engine {\r\n    BASE_URL = BASE_URL\r\n    request = new Request()\r\n\r\n    // Flag to indicate whether the engine has visited the main page to get the cookies.\r\n    // See issue: https://github.com/pionxzh/Pornhub.js/issues/27\r\n    warmedUp = false\r\n\r\n    constructor() {\r\n        this.request.setHeader('Host', this.BASE_URL.replace('https://', ''))\r\n        this.request.setHeader('Origin', this.BASE_URL)\r\n        this.request.setHeader('Referer', `${this.BASE_URL}/`)\r\n        this.request.setHeader('User-Agent', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36')\r\n\r\n        this.request.setCookie('platform', 'pc')\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport interface WebmasterCategory {\r\n    categories: Category[]\r\n}\r\n\r\nexport interface Category {\r\n    id: string\r\n    category: string\r\n}\r\n\r\nexport async function categories(engine: Engine): Promise<Category[]> {\r\n    try {\r\n        const result = await engine.request.get<WebmasterCategory>(WebmasterRoute.categories())\r\n        return result.categories.sort((a, b) => +a.id - +b.id)\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return []\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport interface WebmasterDeleted {\r\n    videos: DeletedVideo[]\r\n}\r\n\r\nexport interface DeletedVideo {\r\n    vkey: string\r\n    deleted_on: string\r\n}\r\n\r\nexport async function deleted(engine: Engine, page: number): Promise<DeletedVideo[]> {\r\n    try {\r\n        const result = await engine.request.get<WebmasterDeleted>(WebmasterRoute.deletedVideos(page))\r\n        return result.videos\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return []\r\n    }\r\n}\r\n","import { slugify } from './string'\r\n\r\nexport class UrlParser {\r\n    static getVideoID(url: string) {\r\n        const UrlRule = /[\\w]+\\.pornhub\\.com\\/view_video\\.php\\?viewkey=([a-zA-z0-9]{1,30})/\r\n        const id = UrlRule.test(url) ? UrlRule.exec(url)![1] : url\r\n        return id\r\n    }\r\n\r\n    static getAlbumID(url: string) {\r\n        const UrlRule = /[\\w]+\\.pornhub\\.com\\/album\\/([0-9]{1,30})/\r\n        const id = UrlRule.test(url) ? UrlRule.exec(url)![1] : url\r\n        return id\r\n    }\r\n\r\n    static getPhotoID(url: string) {\r\n        const UrlRule = /[\\w]+\\.pornhub\\.com\\/photo\\/([0-9]{1,30})/\r\n        const id = UrlRule.test(url) ? UrlRule.exec(url)![1] : url\r\n        return id\r\n    }\r\n\r\n    static getPornstarName(url: string) {\r\n        const UrlRule = /[\\w]+\\.pornhub\\.com\\/pornstar\\/([a-zA-z0-9-]{1,30})/\r\n        const name = UrlRule.test(url) ? UrlRule.exec(url)![1] : slugify(url)\r\n        return name\r\n    }\r\n\r\n    static getModelName(url: string) {\r\n        const UrlRule = /[\\w]+\\.pornhub\\.com\\/model\\/([a-zA-z0-9-]{1,30})/\r\n        const name = UrlRule.test(url) ? UrlRule.exec(url)![1] : slugify(url)\r\n        return name\r\n    }\r\n\r\n    static getChannelName(url: string) {\r\n        const UrlRule = /[\\w]+\\.pornhub\\.com\\/channels\\/([a-zA-z0-9-]{1,30})/\r\n        const name = UrlRule.test(url) ? UrlRule.exec(url)![1] : slugify(url)\r\n        return name\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { UrlParser } from '../../utils/url'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport type WebmasterEmbed =\r\n{\r\n    embed: {\r\n        code: string\r\n    }\r\n} | {\r\n    code: string // '2002' stands for \"No video with this ID.\"\r\n    message: string\r\n    example: string\r\n}\r\n\r\nexport async function video_embed_code(engine: Engine, urlOrId: string): Promise<string | null> {\r\n    try {\r\n        const id = UrlParser.getVideoID(urlOrId)\r\n        const result = await engine.request.get<WebmasterEmbed>(WebmasterRoute.video_embed_code(id))\r\n\r\n        if ('code' in result) throw new Error(result.message)\r\n\r\n        return result.embed.code\r\n            .replace(/&lt;/g, '<')\r\n            .replace(/&gt;/g, '>')\r\n            .replace(/&quot;/g, '\"')\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return null\r\n    }\r\n}\r\n","import type { VideoDetail, VideoResponse } from '../../../types'\r\n\r\nexport function videoTransform(response: VideoResponse): VideoDetail {\r\n    const {\r\n        duration,\r\n        views,\r\n        video_id,\r\n        rating,\r\n        ratings,\r\n        title,\r\n        url,\r\n        default_thumb,\r\n        thumb,\r\n        publish_date,\r\n        thumbs,\r\n        tags,\r\n        pornstars,\r\n        categories,\r\n        segment,\r\n    } = response\r\n\r\n    // vote\r\n    const total = ratings\r\n    const up = Math.round(total * rating / 100)\r\n    const down = total - up\r\n    const vote = { up, down, total, rating: Math.round(rating * 100) / 100 }\r\n\r\n    return {\r\n        duration,\r\n        views,\r\n        video_id,\r\n        vote,\r\n        title,\r\n        url,\r\n        default_thumb,\r\n        thumb,\r\n        publish_date,\r\n        thumbs: thumbs.map(({ width, height, src }) => ({ width, height, src })),\r\n        tags: tags.map(x => x.tag_name),\r\n        pornstars: pornstars.map(x => x.pornstar_name),\r\n        categories: categories.map(x => x.category),\r\n        segment,\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { WebmasterRoute } from '../route'\r\nimport type { VideoDetail, VideoResponse, WebmasterSearchOptions } from '../../types'\r\nimport { videoTransform } from './utils/videoTransform'\r\n\r\nexport interface WebmasterSearch {\r\n    videos: VideoResponse[]\r\n}\r\n\r\nexport async function search(engine: Engine, keyword: string, options: WebmasterSearchOptions): Promise<VideoDetail[]> {\r\n    try {\r\n        const result = await engine.request.get<WebmasterSearch>(WebmasterRoute.search(keyword, options))\r\n        return result.videos.map(x => videoTransform(x))\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return []\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport interface WebmasterStars {\r\n    stars: WebmasterStar[]\r\n}\r\n\r\nexport interface WebmasterStar {\r\n    star: {\r\n        star_name: string\r\n    }\r\n}\r\n\r\nexport async function stars(engine: Engine): Promise<string[]> {\r\n    try {\r\n        const result = await engine.request.get<WebmasterStars>(WebmasterRoute.stars())\r\n        return result.stars.map(x => x.star.star_name)\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return []\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport interface WebmasterStarsDetailed {\r\n    stars: { star: DetailedStar }[]\r\n}\r\n\r\nexport interface DetailedStar {\r\n    star_name: string\r\n    star_thumb: string\r\n    star_url: string\r\n    gender: 'male' | 'female' | (string & {})\r\n    videos_count_all: string\r\n}\r\n\r\nexport async function stars_detailed(engine: Engine): Promise<DetailedStar[]> {\r\n    try {\r\n        const result = await engine.request.get<WebmasterStarsDetailed>(WebmasterRoute.stars_detailed())\r\n        return result.stars.map(x => x.star)\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return []\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport interface WebmasterTags {\r\n    tagsCount: number\r\n    tags: string[]\r\n}\r\n\r\n/**\r\n * Warning: We had to change the response structure due to high amount of tags. Please adjust your code\r\n * -- message from the official API\r\n *\r\n * I don't know what they actually changed :/\r\n */\r\nexport async function tags(engine: Engine, letter: string): Promise<string[]> {\r\n    try {\r\n        const result = await engine.request.get<WebmasterTags>(WebmasterRoute.tags(letter))\r\n        return result.tags\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return []\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { UrlParser } from '../../utils/url'\r\nimport { WebmasterRoute } from '../route'\r\nimport type { ThumbSize, VideoDetail, VideoResponse } from '../../types'\r\nimport { videoTransform } from './utils/videoTransform'\r\n\r\nexport interface WebmasterVideoById {\r\n    video: VideoResponse\r\n}\r\n\r\nexport async function video_by_id(engine: Engine, urlOrId: string, thumbsize: ThumbSize = 'large'): Promise<VideoDetail> {\r\n    const id = UrlParser.getVideoID(urlOrId)\r\n    const result = await engine.request.get<WebmasterVideoById>(WebmasterRoute.video_by_id(id, thumbsize))\r\n    return videoTransform(result.video)\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport { UrlParser } from '../../utils/url'\r\nimport { WebmasterRoute } from '../route'\r\n\r\nexport type WebmasterVideoIsActive =\r\n{\r\n    active: {\r\n        video_id: string\r\n        is_active: '1' | '0'\r\n    }\r\n} | {\r\n    code: string // '2002' stands for \"No video with this ID.\"\r\n    message: string\r\n    example: string\r\n}\r\n\r\nexport async function video_is_active(engine: Engine, urlOrId: string): Promise<boolean> {\r\n    try {\r\n        const id = UrlParser.getVideoID(urlOrId)\r\n        const result = await engine.request.get<WebmasterVideoIsActive>(WebmasterRoute.isVideoActive(id))\r\n\r\n        if ('code' in result) throw new Error(result.message)\r\n\r\n        return result.active.is_active === '1'\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n        return false\r\n    }\r\n}\r\n","import { categories, deleted, search, stars, stars_detailed, tags, video_by_id, video_embed_code, video_is_active } from '../apis/webmaster'\r\nimport type { LowerLetter, ThumbSize, WebmasterSearchOptions } from '../types'\r\nimport type { Engine } from './engine'\r\n\r\nexport class WebMaster {\r\n    constructor(private engine: Engine) {\r\n    }\r\n\r\n    /**\r\n     * Search video by keyword\r\n     * @url https://www.pornhub.com/webmasters/search?search=keyword\r\n     * @example\r\n     * const results = await pornhub.webMaster.search('keyword', { page: 2, period: 'weekly' })\r\n    */\r\n    search(keyword: string, options: WebmasterSearchOptions = {}) {\r\n        return search(this.engine, keyword, options)\r\n    }\r\n\r\n    /**\r\n     * Get video information by url/id\r\n     * @url https://www.pornhub.com/webmasters/video_by_id?id={ID}&thumbsize=large\r\n     * @param urlOrId Video ID or page url\r\n     * @param thumbsize Thumbnail photo size\r\n     * @example\r\n     * const video = await pornhub.webMaster.getVideo('ph5a9634c9a827e')\r\n     */\r\n    getVideo(urlOrId: string, thumbsize?: ThumbSize) {\r\n        return video_by_id(this.engine, urlOrId, thumbsize)\r\n    }\r\n\r\n    /**\r\n     * Get video active status by url/id (deleted video will be false)\r\n     * @url https://www.pornhub.com/webmasters/is_video_active?id={ID}\r\n     * @param urlOrId Video ID or page url\r\n     * @example\r\n     * const isActive = await pornhub.webMaster.isVideoActive('ph5a9634c9a827e')\r\n    */\r\n    isVideoActive(urlOrId: string) {\r\n        return video_is_active(this.engine, urlOrId)\r\n    }\r\n\r\n    /**\r\n     * Get embed HTML code by video url/id\r\n     * @url https://www.pornhub.com/webmasters/video_embed_code?id=ID\r\n     * @param urlOrId Video ID or page url\r\n     * @example\r\n     * const code = await pornhub.webMaster.getVideoEmbedCode('ph5a9634c9a827e')\r\n     * // <iframe src=\"https://www.pornhub.com/embed/xxxxxx\" frameborder=\"0\" width=\"560\" height=\"340\" scrolling=\"no\" allowfullscreen></iframe>\r\n    */\r\n    getVideoEmbedCode(urlOrId: string) {\r\n        return video_embed_code(this.engine, urlOrId)\r\n    }\r\n\r\n    /**\r\n     * Get deleted video list by page\r\n     * @url https://www.pornhub.com/webmasters/deleted_videos?page=1\r\n     * @param page Page number, default: 1\r\n     * @example\r\n     * const deletedVideos = await pornhub.webMaster.getDeletedVideos(2)\r\n    */\r\n    getDeletedVideos(page = 1) {\r\n        return deleted(this.engine, page)\r\n    }\r\n\r\n    /**\r\n     * Query tag list by the first letter of tag name\r\n     * @url https://www.pornhub.com/webmasters/tags?list=a\r\n     * @param letter First letter of tag name. Default: 'a'. Range: a-z.\r\n     * @example\r\n     * const tags = await pornhub.webMaster.getTags('s')\r\n     * // ['solo', 'squirting', 'stockings', ...]\r\n    */\r\n    getTags(letter: LowerLetter = 'a') {\r\n        return tags(this.engine, letter)\r\n    }\r\n\r\n    /**\r\n     * Get category list\r\n     * @url https://www.pornhub.com/webmasters/categories\r\n     * @example\r\n     * const categories = await pornhub.webMaster.getCategories()\r\n     * // [{ id: \"65\", category: \"threesome\" }, { id: \"105\", category: \"60fps\" }]\r\n    */\r\n    getCategories() {\r\n        return categories(this.engine)\r\n    }\r\n\r\n    /**\r\n     * Get pornstar name list\r\n     * @url https://www.pornhub.com/webmasters/stars\r\n     * @example\r\n     * const pornstars = await pornhub.webMaster.getPornstars()\r\n    */\r\n    getPornstars() {\r\n        return stars(this.engine)\r\n    }\r\n\r\n    /**\r\n     * Get pornstar detail list\r\n     * @url https://www.pornhub.com/webmasters/stars_detailed\r\n     * const pornstars = await pornhub.webMaster.getPornstarsDetail()\r\n    */\r\n    getPornstarsDetail() {\r\n        return stars_detailed(this.engine)\r\n    }\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport { Route } from '../../apis'\r\nimport type { Engine } from '../../core/engine'\r\nimport { BASE_URL } from '../../utils/constant'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { UrlParser } from '../../utils/url'\r\n\r\nexport interface AlbumPage {\r\n    photos: {\r\n        url: string\r\n        views: string\r\n        rating: string\r\n        preview: string\r\n    }[]\r\n    provider: {\r\n        id: string\r\n        username: string\r\n        url: string\r\n    }\r\n    tags: string[]\r\n}\r\n\r\nexport async function albumPage(engine: Engine, urlOrId: string): Promise<AlbumPage> {\r\n    const id = UrlParser.getAlbumID(urlOrId)\r\n    const url = Route.albumPage(id)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        photos: parsePhotos($),\r\n        provider: parseProvider($),\r\n        tags: parseTag($),\r\n    }\r\n}\r\n\r\nfunction parsePhotos($: CheerioAPI) {\r\n    const $list = $('ul.photosAlbumsListing li.photoAlbumListContainer div.photoAlbumListBlock')\r\n    const photos = $list.map((_, el) => {\r\n        const item = $(el)\r\n        const url = `${BASE_URL}${item.find('a').attr('href')}` || ''\r\n        const views = item.find('.album-views').text().replace('Views: ', '').trim()\r\n        const rating = item.find('.album-rating').text()\r\n        const preview = getDataAttribute<string>(item, 'bkg', '')\r\n        return { url, views, rating, preview }\r\n    }).get()\r\n\r\n    return photos\r\n}\r\n\r\nfunction parseProvider($: CheerioAPI) {\r\n    const $user = $('div.pfileInfoBox div.usernameWrap')\r\n\r\n    const id = getDataAttribute<string>($user, 'userid', '')\r\n    const username = $user.find('a').text()\r\n    const url = getAttribute<string>($user.find('a'), 'href', '')\r\n\r\n    return { id, username, url }\r\n}\r\n\r\nfunction parseTag($: CheerioAPI) {\r\n    const $list = $('div.tagContainer > a')\r\n    return $list.map((_, el) => $(el).text().trim()).get()\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport { Route } from '../../apis'\r\nimport type { Engine } from '../../core/engine'\r\nimport { getCheerio } from '../../utils/cheerio'\r\nimport { UrlParser } from '../../utils/url'\r\n\r\nexport interface PhotoPage {\r\n    info: {\r\n        title: string\r\n        views: number\r\n        rating: string\r\n        albumID: string\r\n        url: string\r\n    }\r\n    provider: {\r\n        id: number\r\n        username: string\r\n        url: string\r\n    }\r\n    tags: string[]\r\n}\r\n\r\nexport async function photoPage(engine: Engine, urlOrId: string): Promise<PhotoPage> {\r\n    const id = UrlParser.getPhotoID(urlOrId)\r\n    const url = Route.photoPage(id)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        info: parsePhoto($),\r\n        provider: parseProvider($),\r\n        tags: parseTag($),\r\n    }\r\n}\r\n\r\nfunction parsePhoto($: CheerioAPI) {\r\n    const photoWrapper = $('div#photoWrapper')\r\n    const $img = photoWrapper.find('img')\r\n    const title = $img.attr('alt') || ''\r\n    const url = $img.attr('src') || ''\r\n    const albumID = photoWrapper.data('album-id')?.toString() || ''\r\n    const rating = `${photoWrapper.find('span#votePercentageNumber').text()}%` || ''\r\n\r\n    const viewsText = photoWrapper.find('section#photoInfoSection strong').text()\r\n    const views = parseInt(removeComma(viewsText)) || 0\r\n\r\n    return {\r\n        title,\r\n        views,\r\n        rating,\r\n        albumID,\r\n        url,\r\n    }\r\n}\r\n\r\nfunction parseProvider($: CheerioAPI) {\r\n    const $user = $('div#userInformation div.usernameWrap')\r\n\r\n    const id = $user.data('userid') as number\r\n    const username = $user.find('a').text()\r\n    const url = $user.find('a').attr('href') || ''\r\n\r\n    return { id, username, url }\r\n}\r\n\r\nfunction parseTag($: CheerioAPI) {\r\n    const $list = $('ul.tagList a.tagText')\r\n    return $list.map(idx => $list.eq(idx).text()).get()\r\n}\r\n\r\nfunction removeComma(str: string) {\r\n    return str.replace(/,/g, '')\r\n}\r\n","export function parseReadableNumber(viewsText: string): number {\r\n    if (!viewsText) return 0\r\n\r\n    const views = viewsText.replace(/,/g, '')\r\n    if (views.includes('K')) {\r\n        return parseFloat(views) * 1000\r\n    }\r\n    else if (views.includes('M')) {\r\n        return parseFloat(views) * 1000000\r\n    }\r\n    else if (views.includes('B')) {\r\n        return parseFloat(views) * 1000000000\r\n    }\r\n    else {\r\n        return parseFloat(views)\r\n    }\r\n}\r\n","export function toHHMMSS(sec: number) {\r\n    const hours = Math.floor(sec / 3600)\r\n    const minutes = Math.floor(sec / 60) % 60\r\n    const seconds = sec % 60\r\n\r\n    return [hours, minutes, seconds]\r\n        .map(v => v < 10 ? `0${v}` : v)\r\n        .filter((v, i) => v !== '00' || i > 0)\r\n        .join(':')\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport { Route } from '../../apis'\r\nimport type { Engine } from '../../core/engine'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { parseReadableNumber } from '../../utils/number'\r\nimport { toHHMMSS } from '../../utils/time'\r\nimport { UrlParser } from '../../utils/url'\r\n\r\nexport interface VideoPage {\r\n    id: string\r\n    title: string\r\n    views: number\r\n    vote: {\r\n        up: number\r\n        down: number\r\n        total: number\r\n        rating: number\r\n    }\r\n    premium: boolean\r\n    thumb: string\r\n    videos: {\r\n        url: string\r\n        quality: string\r\n        filename: string\r\n        extension: string\r\n    }[]\r\n    provider: {\r\n        username: string\r\n        url: string\r\n    } | null\r\n    /** video duration (in second) */\r\n    duration: number\r\n    /** video duration formatted in \"(HH:)mm:ss\". eg. \"32:09\", \"01:23:05\" */\r\n    durationFormatted: string\r\n    tags: string[]\r\n    pornstars: string[]\r\n    categories: string[]\r\n}\r\n\r\n// const parseFileName = (str: string) => /\\/([a-zA-Z0-9%=&_-]+\\.(mp4|flv))/.exec(str)\r\n\r\nexport async function videoPage(engine: Engine, urlOrId: string): Promise<VideoPage> {\r\n    const id = UrlParser.getVideoID(urlOrId)\r\n    const url = Route.videoPage(id)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        id,\r\n        ...parseByDom(html, $),\r\n    }\r\n}\r\n\r\nfunction parseByDom(html: string, $: CheerioAPI) {\r\n    const voteUp = parseReadableNumber($('span.votesUp').text() || '0')\r\n    const voteDown = parseReadableNumber($('span.votesDown').text() || '0')\r\n\r\n    const title = $('head > title').first().text().replace(' - Pornhub.com', '')\r\n    const viewsText = $('span.count').text() || '0'\r\n    const views = parseReadableNumber(viewsText)\r\n    const vote = {\r\n        up: voteUp,\r\n        down: voteDown,\r\n        total: voteUp + voteDown,\r\n        rating: Math.round(voteUp / (voteUp + voteDown) * 100) / 100,\r\n    }\r\n    const premium = $('.video-wrapper .ph-icon-badge-premium').length !== 0\r\n    const thumb = getAttribute<string>($('.thumbnail img'), 'src', '')\r\n\r\n    // parse video\r\n    const videos = parseVideo(html)\r\n\r\n    // wtf...is this double rel a coding bug from pornhub?\r\n    // <a rel=\"rel=\"nofollow\"\" href=\"/users/xxxx\"  class=\"bolded\">XXXXX</a>\r\n    const providerLink = $('.usernameBadgesWrapper a.bolded').first()\r\n    const provider = providerLink.length\r\n        ? { username: providerLink.text(), url: getAttribute<string>(providerLink, 'href', '') }\r\n        : null\r\n\r\n    const trafficJunkyMeta = $('head meta[name=adsbytrafficjunkycontext]')\r\n    const tags = getDataAttribute<string>(trafficJunkyMeta, 'context-tag')?.split(',') || []\r\n    const pornstars = getDataAttribute<string>(trafficJunkyMeta, 'context-pornstar')?.split(',') || []\r\n    const categories = getDataAttribute<string>(trafficJunkyMeta, 'context-category')?.split(',') || []\r\n\r\n    const durationMeta = $('head meta[property=\"video:duration\"]')\r\n    const duration = +getAttribute<number>(durationMeta, 'content', 0)\r\n    const durationFormatted = toHHMMSS(duration)\r\n    // TODO: VideoObject\r\n\r\n    return {\r\n        title,\r\n        views,\r\n        vote,\r\n        premium,\r\n        thumb,\r\n        videos,\r\n        provider,\r\n        tags,\r\n        pornstars,\r\n        categories,\r\n        duration,\r\n        durationFormatted,\r\n    }\r\n}\r\n\r\nfunction parseVideo(_html: string) {\r\n    return []\r\n    // let rsl = {}\r\n    // const matches = html.match(/(?<=\\*\\/)\\w+/g)\r\n    // const urls = []\r\n    // for (const match of matches) {\r\n    //     const regex = new RegExp(`(?<=${match}=\")[^;]+(?=\")`, 'g')\r\n    //     const value = html.match(regex)[0].replace(/[\" +]/g, '')\r\n\r\n    //     if (value.startsWith('https')) {\r\n    //         if (urls.length === 4) {\r\n    //             break\r\n    //         }\r\n\r\n    //         urls.push(value)\r\n    //     }\r\n    //     else {\r\n    //         urls[urls.length - 1] += value\r\n    //     }\r\n    // }\r\n\r\n    // rsl = urls.map((x) => {\r\n    // // Sometime PH does not provide a resolution, meaning the link is broken\r\n    //     const resolution = x.match(/(?<=_|\\/)\\d*P(?=_)/g)\r\n    //     return resolution !== null && resolution.length > 0 ? [x.match(/(?<=_|\\/)\\d*P(?=_)/g)[0], x] : null\r\n    // }).filter(x => x !== null)\r\n    // rsl = Object.fromEntries(rsl)\r\n    // return rsl\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport type { Counting, Paging } from '../../types'\r\n\r\nexport function parsePaging($: CheerioAPI): Paging {\r\n    const current = parseInt($('li.page_current').text())\r\n    const nextPage = $('li.page_next')\r\n    const maxPage = nextPage.length ? parseInt($('li.page_next').prev('li').text()) : current\r\n    return {\r\n        current,\r\n        maxPage,\r\n        isEnd: !nextPage.length,\r\n    }\r\n}\r\n\r\nexport function parseCounting($: CheerioAPI): Counting {\r\n    try {\r\n        const counterStr = $('.showingCounter').text()\r\n        const [, from = '0', to = '0', total = '0'] = /(\\d+)-(\\d+)\\sof\\s(\\d+)/.exec(counterStr) || []\r\n        return {\r\n            from: parseInt(from),\r\n            to: parseInt(to),\r\n            total: parseInt(total),\r\n        }\r\n    }\r\n    catch (err) {\r\n        return {\r\n            from: 0,\r\n            to: 0,\r\n            total: 0,\r\n        }\r\n    }\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport type { Engine } from '../../core/engine'\r\nimport type { AlbumSearchOptions, Counting, Paging } from '../../types'\r\nimport { Route } from '../../apis'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { BASE_URL } from '../../utils/constant'\r\nimport { parseCounting, parsePaging } from './base'\r\n\r\nexport interface AlbumSearchResult {\r\n    title: string\r\n    url: string\r\n    rating: string\r\n    preview: string\r\n}\r\n\r\nexport async function albumSearch(engine: Engine, keyword: string, options: AlbumSearchOptions): Promise<{\r\n    data: AlbumSearchResult[]\r\n    paging: Paging\r\n    counting: Counting\r\n}> {\r\n    const url = Route.albumSearch(keyword, options)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        data: parseResult($),\r\n        paging: parsePaging($),\r\n        counting: parseCounting($),\r\n    }\r\n}\r\n\r\nfunction parseResult($: CheerioAPI) {\r\n    const $list = $('ul#photosAlbumsSection li.photoAlbumListContainer div.photoAlbumListBlock')\r\n    const result = $list.map((_, el) => {\r\n        const item = $(el)\r\n\r\n        const title = getAttribute<string>(item, 'title', '')\r\n        const url = `${BASE_URL}${item.find('a').attr('href')}`\r\n        const rating = item.find('.album-photo-percentage').text()\r\n        const preview = getDataAttribute<string>(item, 'bkg')\r\n        || getAttribute<string>(item, 'style', '').match(/url\\(\"(.+)\"\\)/)?.[1]\r\n        || ''\r\n        return { title, url, rating, preview }\r\n    }).get()\r\n\r\n    return result\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport urlcatM from 'urlcat'\r\nimport type { Engine } from '../../core/engine'\r\nimport type { Counting, Paging, PornstarSearchOptions } from '../../types'\r\nimport { Route } from '../../apis'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { BASE_URL } from '../../utils/constant'\r\nimport { parseCounting, parsePaging } from './base'\r\n\r\nconst urlcat = (urlcatM as unknown as { default: typeof urlcatM }).default ?? urlcatM\r\n\r\nexport interface PornstarSearchResult {\r\n    name: string\r\n    url: string\r\n    views: string\r\n    videoNum: number\r\n    rank: number\r\n    photo: string\r\n}\r\n\r\nexport async function pornstarSearch(engine: Engine, keyword: string, options: PornstarSearchOptions): Promise<{\r\n    data: PornstarSearchResult[]\r\n    paging: Paging\r\n    counting: Counting\r\n}> {\r\n    const url = Route.pornstarSearch(keyword, options)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        data: parseResult($),\r\n        paging: parsePaging($),\r\n        counting: parseCounting($),\r\n    }\r\n}\r\n\r\nfunction parseResult($: CheerioAPI) {\r\n    const $list = $('ul#pornstarsSearchResult li div.wrap')\r\n    const result = $list.map((_, el) => {\r\n        const item = $(el)\r\n        const path = getAttribute<string>(item.find('a'), 'href', '')\r\n        const img = item.find('img')\r\n\r\n        return {\r\n            name: item.find('.title').text(),\r\n            url: urlcat(BASE_URL, path),\r\n            views: item.find('.pstarViews').text().replace('views', '').trim() || '0',\r\n            videoNum: parseInt(item.find('.videosNumber').text()) || 0,\r\n            rank: parseInt(item.find('.rank_number').text()) || 0,\r\n            photo: getDataAttribute<string>(img, 'thumb_url', ''),\r\n        }\r\n    }).get()\r\n\r\n    return result\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport urlcatM from 'urlcat'\r\nimport type { Engine } from '../../core/engine'\r\nimport type { Counting, GifSearchOptions, Paging } from '../../types'\r\nimport { Route } from '../../apis'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { BASE_URL } from '../../utils/constant'\r\nimport { removeProtectionBracket } from '../../utils/utils'\r\nimport { parseCounting, parsePaging } from './base'\r\n\r\nconst urlcat = (urlcatM as unknown as { default: typeof urlcatM }).default ?? urlcatM\r\n\r\nexport interface GifSearchResult {\r\n    title: string\r\n    url: string\r\n    mp4: string\r\n    webm: string\r\n}\r\n\r\nexport async function gifSearch(engine: Engine, keyword: string, options: GifSearchOptions): Promise<{\r\n    data: GifSearchResult[]\r\n    paging: Paging\r\n    counting: Counting\r\n}> {\r\n    const url = Route.gifSearch(keyword, options)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        data: parseResult($),\r\n        paging: parsePaging($),\r\n        counting: parseCounting($),\r\n    }\r\n}\r\n\r\nfunction parseResult($: CheerioAPI) {\r\n    const list = $('ul.gifLink li.gifVideoBlock ')\r\n    const result = list.map((_, el) => {\r\n        const item = $(el)\r\n\r\n        const video = item.find('video')\r\n        const poster = getAttribute<string>(video, 'poster', '')\r\n        const path = getAttribute<string>(item.find('a'), 'href', '')\r\n\r\n        return {\r\n            title: item.find('.title').text(),\r\n            url: urlcat(BASE_URL, path),\r\n            mp4: getDataAttribute<string>(video, 'mp4', ''),\r\n            webm: getDataAttribute<string>(video, 'webm', ''),\r\n            preview: removeProtectionBracket(poster),\r\n        }\r\n    }).get()\r\n\r\n    return result\r\n}\r\n","export function unescape(str: string) {\r\n    if (typeof str !== 'string') return null\r\n\r\n    return str.replace(/\\\\/g, '')\r\n        .replace(/%2C/g, ',')\r\n        .replace(/%5B/g, '[')\r\n        .replace(/%5D/g, ']')\r\n        .replace(/&amp;/g, '&')\r\n}\r\n\r\n// https://ci.phncdn.com/pics/pornstars/000/002/190/(m=lciuhScOb_c)(mh=y8jot66fDRXSMiYW)thumb_00000.jpg\r\n// => https://ci.phncdn.com/pics/pornstars/000/002/190/thumb_00000.jpg\r\nexport const removeProtectionBracket = (str: string) => str.replace(/\\(.+?\\)/g, '')\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport urlcatM from 'urlcat'\r\nimport type { Engine } from '../../core/engine'\r\nimport type { Counting, Paging, VideoSearchOptions } from '../../types'\r\nimport { Route } from '../../apis'\r\nimport { getAttribute, getCheerio } from '../../utils/cheerio'\r\nimport { BASE_URL } from '../../utils/constant'\r\nimport { parseCounting, parsePaging } from './base'\r\n\r\nconst urlcat = (urlcatM as unknown as { default: typeof urlcatM }).default ?? urlcatM\r\n\r\nexport interface VideoSearchResult {\r\n    title: string\r\n    url: string\r\n    views: string\r\n    duration: string\r\n    /** @deprecated This is no longer valid in pornhub's new version. We don't have a way to tell */\r\n    hd: boolean\r\n    /** @deprecated This is no longer valid in pornhub's new version, use `freePremium` instead */\r\n    premium: boolean\r\n    freePremium: boolean\r\n    preview: string\r\n}\r\n\r\nexport async function videoSearch(engine: Engine, keyword: string, options: VideoSearchOptions): Promise<{\r\n    data: VideoSearchResult[]\r\n    paging: Paging\r\n    counting: Counting\r\n}> {\r\n    const url = Route.videoSearch(keyword, options)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return {\r\n        data: parseResult($),\r\n        paging: parsePaging($),\r\n        counting: parseCounting($),\r\n    }\r\n}\r\n\r\nfunction parseResult($: CheerioAPI) {\r\n    const list = $('#videoSearchResult li.videoBox')\r\n\r\n    const result = list.map((_, el) => {\r\n        const item = $(el)\r\n        const thumb = item.find('.linkVideoThumb').eq(0)\r\n        const title = getAttribute<string>(thumb, 'title', '')\r\n        const path = getAttribute<string>(thumb, 'href', '')\r\n        const img = item.find('img')\r\n        const preview = getAttribute<string>(img, 'src', '')\r\n\r\n        return {\r\n            title,\r\n            url: urlcat(BASE_URL, path),\r\n            views: item.find('.videoDetailsBlock .views var').text(),\r\n            duration: item.find('.duration').text(),\r\n            hd: !!item.find('.hd-thumbnail').length,\r\n            premium: !!item.find('.premiumIcon').length,\r\n            freePremium: !!item.find('.marker-overlays .phpFreeBlock').length,\r\n            preview,\r\n        }\r\n    }).get()\r\n\r\n    return result\r\n}\r\n","import type { Engine } from '../core/engine'\r\nimport { getCheerio, getDataAttribute } from '../utils/cheerio'\r\nimport { getMainPage } from './getMainPage'\r\n\r\nexport async function getToken(engine: Engine) {\r\n    const html = await getMainPage(engine)\r\n    const $ = getCheerio(html)\r\n    const inputEl = $('form#search_form input[name=\"search\"]')\r\n    const token = getDataAttribute<string, null>(inputEl, 'token', null)\r\n    if (!token) throw new Error('Failed to get token')\r\n    return token\r\n}\r\n","import type { Engine } from '../core/engine'\r\nimport type { AutoCompleteOptions } from '../types'\r\nimport type { AutoCompleteResponse } from '../types/AutoComplete'\r\nimport { getToken } from './getToken'\r\nimport { Route } from './route'\r\n\r\nexport async function getAutoComplete(engine: Engine, keyword: string, options: AutoCompleteOptions) {\r\n    const token = options.token ?? await getToken(engine)\r\n    const result = await engine.request.get<AutoCompleteResponse>(Route.autocomplete(keyword, {\r\n        ...options,\r\n        token,\r\n    }))\r\n\r\n    return {\r\n        ...result,\r\n        models: result.models?.map(item => ({\r\n            ...item,\r\n            url: Route.modelPage(item.slug),\r\n        })).sort((a, b) => a.rank - b.rank) ?? [],\r\n        pornstars: result.pornstars?.map(item => ({\r\n            ...item,\r\n            url: Route.pornstarPage(item.slug),\r\n        })).sort((a, b) => a.rank - b.rank) ?? [],\r\n        channels: result.channels?.map(item => ({\r\n            ...item,\r\n            url: Route.channelPage(item.slug),\r\n        })).sort((a, b) => +a.rank - +b.rank) ?? [],\r\n    }\r\n}\r\n","import type { Engine } from '../../core/engine'\r\nimport type { AutoCompleteOptions } from '../../types'\r\nimport { getAutoComplete } from '../../apis/autoComplete'\r\nimport type { AutoCompleteResultItem } from '../../types/AutoComplete'\r\n\r\nexport async function modelSearch(engine: Engine, keyword: string, options: AutoCompleteOptions = {}): Promise<AutoCompleteResultItem<number>[]> {\r\n    const result = await getAutoComplete(engine, keyword, options)\r\n    return result.models\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport { Route } from '../../apis'\r\nimport type { Engine } from '../../core/engine'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { parseReadableNumber } from '../../utils/number'\r\nimport { UrlParser } from '../../utils/url'\r\n\r\nexport interface ModelPage {\r\n    name: string\r\n    about: string\r\n    bio: string\r\n    avatar: string\r\n    cover: string\r\n    rank: number\r\n    weeklyRank: number\r\n    verified: boolean\r\n    awarded: boolean\r\n    premium: boolean\r\n    subscribers: number\r\n    videosFrontpage: { link: string; thumb: string }[]\r\n    featuredIn: { name: string; url: string }[]\r\n\r\n    uploadedVideoCount: number\r\n    taggedVideoCount: number\r\n\r\n    gender?: string\r\n    born?: string\r\n    birthPlace?: string\r\n    starSign?: string\r\n    measurements?: string\r\n    endowment?: string\r\n    relationship?: 'Open' | 'Taken' | 'Single' | (string & {})\r\n    interestedIn?: string\r\n    cityAndCountry?: string\r\n    careerStatus?: string\r\n    careerStartAndEnd?: string\r\n    height?: string\r\n    weight?: string\r\n    ethnicity?: string\r\n    background?: string\r\n    hairColor?: string\r\n    eyeColor?: string\r\n    fakeBoobs?: string\r\n    tattoos?: string\r\n    piercings?: string\r\n    interests?: string\r\n    videoWatched?: number\r\n    turnOns?: string\r\n    turnOffs?: string\r\n    videoViews?: number\r\n    profileViews?: number\r\n\r\n    socials: {\r\n        website?: string\r\n        twitter?: string\r\n        instagram?: string\r\n        snapchat?: string\r\n        modelhub?: string\r\n        amazonWishList?: string\r\n    }\r\n}\r\n\r\nconst defaultMapper = (value: string) => value\r\nconst yesNoMapper = (value: string) => value === 'Yes'\r\nconst stripeSpaceMapper = (value: string) => value.split(/\\s+/).join(' ')\r\nconst numberMapper = (value: string) => parseReadableNumber(value)\r\nconst DefaultMapper = {\r\n    key: defaultMapper,\r\n    value: defaultMapper,\r\n}\r\nconst KeyMapper: Record<string, {\r\n    key: (key: string) => keyof ModelPage\r\n    value: (value: string) => string | boolean | number\r\n}> = {\r\n    'Relationship status': {\r\n        key: () => 'relationship',\r\n        value: defaultMapper,\r\n    },\r\n    'Interested in': {\r\n        key: () => 'interestedIn',\r\n        value: defaultMapper,\r\n    },\r\n    'Gender': {\r\n        key: () => 'gender',\r\n        value: defaultMapper,\r\n    },\r\n    'Height': {\r\n        key: () => 'height',\r\n        value: defaultMapper,\r\n    },\r\n    'Weight': {\r\n        key: () => 'weight',\r\n        value: defaultMapper,\r\n    },\r\n    'Ethnicity': {\r\n        key: () => 'ethnicity',\r\n        value: defaultMapper,\r\n    },\r\n    'Background': {\r\n        key: () => 'background',\r\n        value: defaultMapper,\r\n    },\r\n    'Hair Color': {\r\n        key: () => 'hairColor',\r\n        value: defaultMapper,\r\n    },\r\n    'Eye Color': {\r\n        key: () => 'eyeColor',\r\n        value: defaultMapper,\r\n    },\r\n    'Fake Boobs': {\r\n        key: () => 'fakeBoobs',\r\n        value: yesNoMapper,\r\n    },\r\n    'Tattoos': {\r\n        key: () => 'tattoos',\r\n        value: yesNoMapper,\r\n    },\r\n    'Piercings': {\r\n        key: () => 'piercings',\r\n        value: yesNoMapper,\r\n    },\r\n    'Video Views': {\r\n        key: () => 'videoViews',\r\n        value: numberMapper,\r\n    },\r\n    'Profile Views': {\r\n        key: () => 'profileViews',\r\n        value: numberMapper,\r\n    },\r\n    'Videos Watched': {\r\n        key: () => 'videoWatched',\r\n        value: numberMapper,\r\n    },\r\n    'Turn Ons': {\r\n        key: () => 'turnOns',\r\n        value: defaultMapper,\r\n    },\r\n    'Turn Offs': {\r\n        key: () => 'turnOffs',\r\n        value: defaultMapper,\r\n    },\r\n    'Interests and hobbies': {\r\n        key: () => 'interests',\r\n        value: defaultMapper,\r\n    },\r\n    'Born': {\r\n        key: () => 'born',\r\n        value: defaultMapper,\r\n    },\r\n    'Birth Place': {\r\n        key: () => 'birthPlace',\r\n        value: defaultMapper,\r\n    },\r\n    'Birthplace': {\r\n        key: () => 'birthPlace',\r\n        value: defaultMapper,\r\n    },\r\n    'Star Sign': {\r\n        key: () => 'starSign',\r\n        value: defaultMapper,\r\n\r\n    },\r\n    'Measurements': {\r\n        key: () => 'measurements',\r\n        value: defaultMapper,\r\n    },\r\n    'City and Country': {\r\n        key: () => 'cityAndCountry',\r\n        value: defaultMapper,\r\n    },\r\n    'Endowment': {\r\n        key: () => 'endowment',\r\n        value: defaultMapper,\r\n    },\r\n    'Career Status': {\r\n        key: () => 'careerStatus',\r\n        value: defaultMapper,\r\n    },\r\n    'Career Start and End': {\r\n        key: () => 'careerStartAndEnd',\r\n        value: stripeSpaceMapper,\r\n    },\r\n}\r\n\r\nconst parseVideoCount = (text: string) => {\r\n    // \"Showing 1-XX of YY\"\r\n    if (!text) return 0\r\n\r\n    const match = text.match(/Showing \\d+-\\d+ of (\\d+)/)\r\n    if (match) return parseReadableNumber(match[1])\r\n\r\n    return 0\r\n}\r\n\r\nexport async function modelPage(engine: Engine, urlOrName: string): Promise<ModelPage> {\r\n    const name = UrlParser.getModelName(urlOrName)\r\n    if (!name) throw new Error(`Invalid model input: ${urlOrName}`)\r\n\r\n    const url = Route.modelPage(name)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return parseInfo($)\r\n}\r\n\r\nfunction parseInfo($: CheerioAPI): ModelPage {\r\n    const infoPieces = $('div.infoPiece').toArray()\r\n    const info = Object.fromEntries(infoPieces.map((el) => {\r\n        const item = $(el)\r\n        const key = item.find('span:nth-child(1)').text().trim().replace(':', '')\r\n        const value = item.find('span:nth-child(2)').text().trim()\r\n            || item.text().replace(item.find('span:nth-child(1)').text(), '').trim()\r\n        const mapper = KeyMapper[key] || DefaultMapper\r\n        return [mapper.key(key), mapper.value(value)]\r\n    }))\r\n\r\n    const name = $('.nameSubscribe > .name').text().trim()\r\n\r\n    const rankEl = $('div.rankingInfo > .infoBox > span')\r\n    const rank = parseReadableNumber(rankEl.text().trim())\r\n\r\n    const weeklyRankEl = $('div.rankingInfo > div.infoBox.rankDetails > big')\r\n    const weeklyRank = parseReadableNumber(weeklyRankEl.text().trim())\r\n\r\n    const linkEl = $('ul.videos > li.videoBox > div.wrap > div.phimage > a')\r\n    let videosFrontpage:  {link: string, thumb: string}[] = []; \r\n    linkEl.each((_: any,e: any)=> {videosFrontpage.push({link:$(e).attr('href')!, thumb:$(e).find('img').attr('src')!})})\r\n\r\n    const avatarEl = $('img#getAvatar, .topProfileHeader > .thumbImage > img')\r\n    const avatar = getAttribute<string>(avatarEl, 'src', '')\r\n\r\n    const coverEl = $('img#coverPictureDefault, .topProfileHeader > .coverImage > img')\r\n    const cover = getAttribute<string>(coverEl, 'src', '')\r\n\r\n    const aboutEl = $('section.aboutMeSection > div:nth-child(2)')\r\n    const about = aboutEl.text().trim()\r\n\r\n    const bioEl = $('.biographyText .content div[itemprop=\"description\"], .bio:not(:has(.aboutMeSection)) > .text')\r\n    const bio = stripeSpaceMapper(bioEl.text().trim())\r\n\r\n    const verifiedEl = $('.badge-username > .verifiedPornstar')\r\n    const verified = !!verifiedEl.length\r\n\r\n    const awardEl = $('.badge-username > .trophyPornStar')\r\n    const awarded = !!awardEl.length\r\n\r\n    const premiumEl = $('.badge-username > .premium-icon')\r\n    const premium = !!premiumEl.length\r\n\r\n    const subscribersEl = $('div.tooltipTrig.infoBox[data-title^=\"Subscribers:\"]')\r\n    const subscribersText = getDataAttribute<string>(subscribersEl, 'title', '')\r\n        .replace('Subscribers: ', '')\r\n    const subscribersText2 = $('div.infoBox:has(.title:contains(\"Subscribers\")) > span').text().trim()\r\n    const subscribers = parseReadableNumber(subscribersText) || parseReadableNumber(subscribersText2)\r\n\r\n    const featuredIn = $('div.featuredIn > a')\r\n        .toArray()\r\n        .map((el) => {\r\n            const item = $(el)\r\n            const name = item.text().trim()\r\n            const url = getAttribute<string>(item, 'href', '')\r\n            return { name, url }\r\n        })\r\n        .filter(item => item.name && item.url)\r\n\r\n    let uploadedVideoCount = 0\r\n    const taggedVideoCount = 0\r\n    if (verified) {\r\n        const recentVideoCountEl = $('.mostRecentPornstarVideos > .pornstarVideosCounter')\r\n        uploadedVideoCount = parseVideoCount(recentVideoCountEl.text().trim())\r\n\r\n        // looks like model page doesn't have tagged video count\r\n    }\r\n    else {\r\n        // there is no unverified model :D\r\n    }\r\n\r\n    const socials = {\r\n        website: getAttribute<string>($('a:has(.officialSiteIcon)'), 'href'),\r\n        twitter: getAttribute<string>($('a:has(.twitterIcon)'), 'href'),\r\n        instagram: getAttribute<string>($('a:has(.instagramIcon)'), 'href'),\r\n        snapchat: getAttribute<string>($('a:has(.snapchatIcon)'), 'href'),\r\n        modelhub: getAttribute<string>($('a:has(.modelhubIcon)'), 'href'),\r\n        amazonWishList: getAttribute<string>($('a:has(.amazonWishlistIcon)'), 'href')\r\n            || getAttribute<string>($('a:has(.amazonWLIcon)'), 'href'),\r\n    }\r\n\r\n    return {\r\n        name,\r\n        about,\r\n        bio,\r\n        avatar,\r\n        cover,\r\n        rank,\r\n        videosFrontpage,\r\n        weeklyRank,\r\n        verified,\r\n        awarded,\r\n        premium,\r\n        subscribers,\r\n        featuredIn,\r\n        uploadedVideoCount,\r\n        taggedVideoCount,\r\n        ...info,\r\n        socials,\r\n    } as ModelPage\r\n}\r\n","import type { CheerioAPI } from 'cheerio'\r\nimport { Route } from '../../apis'\r\nimport type { Engine } from '../../core/engine'\r\nimport { getAttribute, getCheerio, getDataAttribute } from '../../utils/cheerio'\r\nimport { parseReadableNumber } from '../../utils/number'\r\nimport { UrlParser } from '../../utils/url'\r\n\r\nexport interface PornstarPage {\r\n    name: string\r\n    about: string\r\n    bio: string\r\n    avatar: string\r\n    cover: string\r\n    rank: number\r\n    verified: boolean\r\n    awarded: boolean\r\n    premium: boolean\r\n    subscribers: number\r\n    featuredIn: { name: string; url: string }[]\r\n\r\n    uploadedVideoCount: number\r\n    taggedVideoCount: number\r\n\r\n    gender?: string\r\n    born?: string\r\n    birthPlace?: string\r\n    starSign?: string\r\n    measurements?: string\r\n    endowment?: string\r\n    relationship?: 'Open' | 'Taken' | 'Single' | (string & {})\r\n    interestedIn?: string\r\n    cityAndCountry?: string\r\n    pornstarProfileViews?: number\r\n    careerStatus?: string\r\n    careerStartAndEnd?: string\r\n    height?: string\r\n    weight?: string\r\n    ethnicity?: string\r\n    background?: string\r\n    hairColor?: string\r\n    eyeColor?: string\r\n    fakeBoobs?: string\r\n    tattoos?: string\r\n    piercings?: string\r\n    interests?: string\r\n    videoWatched?: number\r\n    turnOns?: string\r\n    turnOffs?: string\r\n    videoViews?: number\r\n    profileViews?: number\r\n\r\n    socials: {\r\n        website?: string\r\n        twitter?: string\r\n        instagram?: string\r\n        snapchat?: string\r\n        modelhub?: string\r\n        amazonWishList?: string\r\n    }\r\n}\r\n\r\nconst defaultMapper = (value: string) => value\r\nconst yesNoMapper = (value: string) => value === 'Yes'\r\nconst stripeSpaceMapper = (value: string) => value.split(/\\s+/).join(' ')\r\nconst numberMapper = (value: string) => parseReadableNumber(value)\r\nconst DefaultMapper = {\r\n    key: defaultMapper,\r\n    value: defaultMapper,\r\n}\r\nconst KeyMapper: Record<string, {\r\n    key: (key: string) => keyof PornstarPage\r\n    value: (value: string) => string | boolean | number\r\n}> = {\r\n    'Relationship status': {\r\n        key: () => 'relationship',\r\n        value: defaultMapper,\r\n    },\r\n    'Interested in': {\r\n        key: () => 'interestedIn',\r\n        value: defaultMapper,\r\n    },\r\n    'Gender': {\r\n        key: () => 'gender',\r\n        value: defaultMapper,\r\n    },\r\n    'Height': {\r\n        key: () => 'height',\r\n        value: defaultMapper,\r\n    },\r\n    'Weight': {\r\n        key: () => 'weight',\r\n        value: defaultMapper,\r\n    },\r\n    'Ethnicity': {\r\n        key: () => 'ethnicity',\r\n        value: defaultMapper,\r\n    },\r\n    'Background': {\r\n        key: () => 'background',\r\n        value: defaultMapper,\r\n    },\r\n    'Hair Color': {\r\n        key: () => 'hairColor',\r\n        value: defaultMapper,\r\n    },\r\n    'Eye Color': {\r\n        key: () => 'eyeColor',\r\n        value: defaultMapper,\r\n    },\r\n    'Fake Boobs': {\r\n        key: () => 'fakeBoobs',\r\n        value: yesNoMapper,\r\n    },\r\n    'Tattoos': {\r\n        key: () => 'tattoos',\r\n        value: yesNoMapper,\r\n    },\r\n    'Piercings': {\r\n        key: () => 'piercings',\r\n        value: yesNoMapper,\r\n    },\r\n    'Video Views': {\r\n        key: () => 'videoViews',\r\n        value: numberMapper,\r\n    },\r\n    'Profile Views': {\r\n        key: () => 'profileViews',\r\n        value: numberMapper,\r\n    },\r\n    'Pornstar Profile Views': {\r\n        key: () => 'pornstarProfileViews',\r\n        value: numberMapper,\r\n    },\r\n    'Videos Watched': {\r\n        key: () => 'videoWatched',\r\n        value: numberMapper,\r\n    },\r\n    'Turn Ons': {\r\n        key: () => 'turnOns',\r\n        value: defaultMapper,\r\n    },\r\n    'Turn Offs': {\r\n        key: () => 'turnOffs',\r\n        value: defaultMapper,\r\n    },\r\n    'Interests and hobbies': {\r\n        key: () => 'interests',\r\n        value: defaultMapper,\r\n    },\r\n    'Born': {\r\n        key: () => 'born',\r\n        value: defaultMapper,\r\n    },\r\n    'Birth Place': {\r\n        key: () => 'birthPlace',\r\n        value: defaultMapper,\r\n    },\r\n    'Birthplace': {\r\n        key: () => 'birthPlace',\r\n        value: defaultMapper,\r\n    },\r\n    'Star Sign': {\r\n        key: () => 'starSign',\r\n        value: defaultMapper,\r\n    },\r\n    'Measurements': {\r\n        key: () => 'measurements',\r\n        value: defaultMapper,\r\n    },\r\n    'City and Country': {\r\n        key: () => 'cityAndCountry',\r\n        value: defaultMapper,\r\n    },\r\n    'Endowment': {\r\n        key: () => 'endowment',\r\n        value: defaultMapper,\r\n    },\r\n    'Career Status': {\r\n        key: () => 'careerStatus',\r\n        value: defaultMapper,\r\n    },\r\n    'Career Start and End': {\r\n        key: () => 'careerStartAndEnd',\r\n        value: stripeSpaceMapper,\r\n    },\r\n}\r\n\r\nconst parseVideoCount = (text: string) => {\r\n    // \"Showing 1-XX of YY\"\r\n    if (!text) return 0\r\n\r\n    const match = text.match(/Showing \\d+-\\d+ of (\\d+)/)\r\n    if (match) return parseReadableNumber(match[1])\r\n\r\n    return 0\r\n}\r\n\r\nexport async function pornstarPage(engine: Engine, urlOrName: string): Promise<PornstarPage> {\r\n    const name = UrlParser.getPornstarName(urlOrName)\r\n    if (!name) throw new Error(`Invalid pornstar input: ${urlOrName}`)\r\n\r\n    const url = Route.pornstarPage(name)\r\n    const html = await engine.request.raw(url)\r\n    const $ = getCheerio(html)\r\n\r\n    return parseInfo($)\r\n}\r\n\r\nfunction parseInfo($: CheerioAPI): PornstarPage {\r\n    const infoPieces = $('div.infoPiece').toArray()\r\n    const info = Object.fromEntries(infoPieces.map((el) => {\r\n        const item = $(el)\r\n        const key = item.find('span:nth-child(1)').text().trim().replace(':', '')\r\n        const value = item.find('span:nth-child(2)').text().trim()\r\n            || item.text().replace(item.find('span:nth-child(1)').text(), '').trim()\r\n        const mapper = KeyMapper[key] || DefaultMapper\r\n        return [mapper.key(key), mapper.value(value)]\r\n    }))\r\n\r\n    const name = $('.nameSubscribe > .name').text().trim()\r\n\r\n    const rankEl = $('div.rankingInfo > .infoBox > span')\r\n    const rank = parseReadableNumber(rankEl.text().trim())\r\n\r\n    const avatarEl = $('img#getAvatar, .topProfileHeader > .thumbImage > img')\r\n    const avatar = getAttribute<string>(avatarEl, 'src', '')\r\n\r\n    const coverEl = $('img#coverPictureDefault, .topProfileHeader > .coverImage > img')\r\n    const cover = getAttribute<string>(coverEl, 'src', '')\r\n\r\n    const aboutEl = $('section.aboutMeSection > div:nth-child(2)')\r\n    const about = aboutEl.text().trim()\r\n\r\n    const bioEl = $('.biographyText .content div[itemprop=\"description\"], .bio:not(:has(.aboutMeSection)) > .text')\r\n    const bio = stripeSpaceMapper(bioEl.text().trim())\r\n\r\n    const verifiedEl = $('.badge-username > .verifiedPornstar')\r\n    const verified = !!verifiedEl.length\r\n\r\n    const awardEl = $('.badge-username > .trophyPornStar')\r\n    const awarded = !!awardEl.length\r\n\r\n    const premiumEl = $('.badge-username > .premium-icon')\r\n    const premium = !!premiumEl.length\r\n\r\n    const subscribersEl = $('div.tooltipTrig.infoBox[data-title^=\"Subscribers:\"]')\r\n    const subscribersText = getDataAttribute<string>(subscribersEl, 'title', '')\r\n        .replace('Subscribers: ', '')\r\n    const subscribersText2 = $('div.infoBox:has(.title:contains(\"Subscribers\")) > span').text().trim()\r\n    const subscribers = parseReadableNumber(subscribersText) || parseReadableNumber(subscribersText2)\r\n\r\n    const featuredIn = $('div.featuredIn > a')\r\n        .toArray()\r\n        .map((el) => {\r\n            const item = $(el)\r\n            const name = item.text().trim()\r\n            const url = getAttribute<string>(item, 'href', '')\r\n            return { name, url }\r\n        })\r\n        .filter(item => item.name && item.url)\r\n\r\n    let uploadedVideoCount = 0\r\n    let taggedVideoCount = 0\r\n    if (verified) {\r\n        const uploadedVideoCountEl = $('.pornstarUploadedVideos > .pornstarVideosCounter')\r\n        uploadedVideoCount = parseVideoCount(uploadedVideoCountEl.text().trim())\r\n\r\n        const taggedVideoCountEl = $('.mostRecentPornstarVideos > .pornstarVideosCounter')\r\n        taggedVideoCount = parseVideoCount(taggedVideoCountEl.text().trim())\r\n    }\r\n    else {\r\n        const videoCounter = $('.pornstarVideosCounter').first()\r\n        if (videoCounter.length) {\r\n            const title = videoCounter.parent().find('.sectionTitle > h2').first().text().trim()\r\n            if (title.endsWith('Tagged Videos')) {\r\n                taggedVideoCount = parseVideoCount(videoCounter.text().trim())\r\n            }\r\n\r\n            // non-verified pornstar are not allowed to upload videos\r\n            // uploadedVideoCount = 0\r\n        }\r\n    }\r\n\r\n    const socials = {\r\n        website: getAttribute<string>($('a:has(.officialSiteIcon)'), 'href'),\r\n        twitter: getAttribute<string>($('a:has(.twitterIcon)'), 'href'),\r\n        instagram: getAttribute<string>($('a:has(.instagramIcon)'), 'href'),\r\n        snapchat: getAttribute<string>($('a:has(.snapchatIcon)'), 'href'),\r\n        modelhub: getAttribute<string>($('a:has(.modelhubIcon)'), 'href'),\r\n        amazonWishList: getAttribute<string>($('a:has(.amazonWishlistIcon)'), 'href')\r\n            || getAttribute<string>($('a:has(.amazonWLIcon)'), 'href'),\r\n    }\r\n\r\n    return {\r\n        name,\r\n        about,\r\n        bio,\r\n        avatar,\r\n        cover,\r\n        rank,\r\n        verified,\r\n        awarded,\r\n        premium,\r\n        subscribers,\r\n        featuredIn,\r\n        uploadedVideoCount,\r\n        taggedVideoCount,\r\n        ...info,\r\n        socials,\r\n    } as PornstarPage\r\n}\r\n"],"mappings":"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","names":["urlcatM","createDebug","fetch","tags","categories","parseProvider","parseTag","tags","categories","import_urlcat","urlcat","urlcatM","parseResult","import_urlcat","urlcat","urlcatM","parseResult","import_urlcat","urlcat","urlcatM","parseResult","getToken","getToken","name","defaultMapper","yesNoMapper","stripeSpaceMapper","numberMapper","DefaultMapper","KeyMapper","parseVideoCount","parseInfo","name","getToken"]}